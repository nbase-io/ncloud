# ğŸ”’ ë³´ì•ˆ ê°€ì´ë“œ

SSL ì¸ì¦ì„œ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì˜ ë³´ì•ˆ ì„¤ì • ë° ëª¨ë²” ì‚¬ë¡€ì…ë‹ˆë‹¤.

## ğŸ›¡ï¸ êµ¬í˜„ëœ ë³´ì•ˆ ê¸°ëŠ¥

### 1. ì…ë ¥ ê²€ì¦ ë° Sanitization
- **ë„ë©”ì¸ ê²€ì¦**: SSRF ê³µê²© ë°©ì§€ë¥¼ ìœ„í•œ private IP ì°¨ë‹¨
- **ì „í™”ë²ˆí˜¸ ê²€ì¦**: í•œêµ­ íœ´ëŒ€í° ë²ˆí˜¸ í˜•ì‹ ê°•ì œ
- **íŒŒì¼ ê²½ë¡œ ê²€ì¦**: Path Traversal ê³µê²© ë°©ì§€
- **í™˜ê²½ë³€ìˆ˜ ê²€ì¦**: ê° í™˜ê²½ë³€ìˆ˜ë³„ íŠ¹í™”ëœ ìœ íš¨ì„± ê²€ì‚¬

### 2. SSL/TLS ë³´ì•ˆ
- **SSL ì¸ì¦ì„œ ê²€ì¦**: `rejectUnauthorized: true`ë¡œ ì„¤ì •
- **ë„ë©”ì¸ ì¼ì¹˜ ê²€ì¦**: ì¸ì¦ì„œì™€ ìš”ì²­ ë„ë©”ì¸ ì¼ì¹˜ í™•ì¸
- **íƒ€ì„ì•„ì›ƒ ì„¤ì •**: ì—°ê²° ì‹œê°„ ì´ˆê³¼ ë°©ì§€

### 3. ë¯¼ê°ì •ë³´ ë³´í˜¸
- **í™˜ê²½ë³€ìˆ˜ í•„ìˆ˜í™”**: ëª¨ë“  API í‚¤ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œë§Œ ê´€ë¦¬
- **ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹**: ë¡œê·¸ì—ì„œ API í‚¤, ì „í™”ë²ˆí˜¸ ìë™ ë§ˆìŠ¤í‚¹
- **ì—ëŸ¬ ì •ë³´ ì œí•œ**: ì‹œìŠ¤í…œ ì •ë³´ ë…¸ì¶œ ë°©ì§€

### 4. íŒŒì¼ ì‹œìŠ¤í…œ ë³´ì•ˆ
- **ê²½ë¡œ ê²€ì¦**: ì ˆëŒ€ ê²½ë¡œ ë° ìƒìœ„ ë””ë ‰í† ë¦¬ ì ‘ê·¼ ì°¨ë‹¨
- **ê¶Œí•œ ê²€ì¦**: íŒŒì¼ ì½ê¸°/ì“°ê¸° ê¶Œí•œ í™•ì¸
- **gitignore**: ë¯¼ê°ì •ë³´ íŒŒì¼ ì œì™¸

## âš ï¸ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

### 1. í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬
```bash
# âœ… ì˜¬ë°”ë¥¸ ê¶Œí•œ ì„¤ì •
chmod 600 .env
chown $USER:$USER .env

# âŒ ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ
git add .env  # í™˜ê²½ë³€ìˆ˜ íŒŒì¼ì„ gitì— ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”
```

### 2. íŒŒì¼ ê¶Œí•œ ì„¤ì •
```bash
# SSL ì²´í¬ ë””ë ‰í† ë¦¬
chmod 755 /path/to/ssl-checker

# ì„¤ì • íŒŒì¼ë“¤
chmod 644 domain.txt notification.txt
chmod 600 .env

# ë¡œê·¸ íŒŒì¼
chmod 640 /var/log/ssl-check*.log
```

### 3. ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ
- ë°©í™”ë²½ì—ì„œ í•„ìš”í•œ í¬íŠ¸ë§Œ ê°œë°© (443, NCP SENS API)
- ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
- VPN ë˜ëŠ” ë³´ì•ˆ í„°ë„ ì‚¬ìš© ê¶Œì¥

### 4. ë¡œê·¸ ë³´ì•ˆ
```bash
# ë¡œê·¸ íŒŒì¼ ì •ê¸° ì‚­ì œ (cron)
0 2 * * 0 find /var/log -name "ssl-check*.log" -mtime +30 -delete

# ë¡œê·¸ ì••ì¶• ë³´ê´€
0 3 * * * gzip /var/log/ssl-check-$(date -d "7 days ago" +%Y%m%d).log
```

## ğŸ”§ ë³´ì•ˆ ì„¤ì • ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì„¤ì¹˜ í›„ í•„ìˆ˜ í™•ì¸ì‚¬í•­

- [ ] `.env` íŒŒì¼ ê¶Œí•œ 600ìœ¼ë¡œ ì„¤ì •
- [ ] í™˜ê²½ë³€ìˆ˜ ê°’ ìœ íš¨ì„± í™•ì¸
- [ ] `domain.txt`, `notification.txt` gitignore í™•ì¸
- [ ] ë¡œê·¸ íŒŒì¼ ê¶Œí•œ ë° ìœ„ì¹˜ í™•ì¸
- [ ] ë°©í™”ë²½ ì„¤ì • í™•ì¸

### ì£¼ê¸°ì  ë³´ì•ˆ ì ê²€

**ë§¤ì£¼:**
- [ ] ì˜ì¡´ì„± ì·¨ì•½ì  ê²€ì‚¬ (`npm audit`)
- [ ] ë¡œê·¸ íŒŒì¼ì—ì„œ ì´ìƒ í™œë™ í™•ì¸
- [ ] í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ê¶Œí•œ í™•ì¸

**ë§¤ì›”:**
- [ ] ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
- [ ] ë³´ì•ˆ íŒ¨ì¹˜ ì ìš©
- [ ] ì ‘ê·¼ ë¡œê·¸ ë¶„ì„

## ğŸš¨ ë³´ì•ˆ ì‚¬ê³  ëŒ€ì‘

### 1. API í‚¤ ìœ ì¶œ ì˜ì‹¬ì‹œ
```bash
# 1. ì¦‰ì‹œ NCP ì½˜ì†”ì—ì„œ í•´ë‹¹ API í‚¤ ë¹„í™œì„±í™”
# 2. ìƒˆ API í‚¤ ë°œê¸‰
# 3. .env íŒŒì¼ ì—…ë°ì´íŠ¸
# 4. ì‹œìŠ¤í…œ ì¬ì‹œì‘
# 5. ë¡œê·¸ì—ì„œ ì´ìƒ í™œë™ í™•ì¸
```

### 2. ì‹œìŠ¤í…œ ì¹¨ì… ì˜ì‹¬ì‹œ
```bash
# 1. ì‹œìŠ¤í…œ ì¤‘ì§€
sudo systemctl stop ssl-checker

# 2. ë¡œê·¸ ë°±ì—…
cp /var/log/ssl-check*.log /backup/incident-$(date +%Y%m%d)/

# 3. íŒŒì¼ ë¬´ê²°ì„± í™•ì¸
find /path/to/ssl-checker -type f -exec md5sum {} \; > checksums.txt

# 4. ê¶Œí•œ í™•ì¸
ls -la /path/to/ssl-checker/
```

## ğŸ” ë³´ì•ˆ ê°ì‚¬

### ìë™ ë³´ì•ˆ ê²€ì‚¬ ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash
# security_check.sh

echo "ğŸ” SSL ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ë³´ì•ˆ ê²€ì‚¬"

# 1. íŒŒì¼ ê¶Œí•œ í™•ì¸
echo "1. íŒŒì¼ ê¶Œí•œ í™•ì¸"
ls -la .env domain.txt notification.txt

# 2. ì˜ì¡´ì„± ì·¨ì•½ì  í™•ì¸
echo "2. ì˜ì¡´ì„± ì·¨ì•½ì  í™•ì¸"
npm audit

# 3. í™˜ê²½ë³€ìˆ˜ í™•ì¸ (ê°’ì€ ìˆ¨ê¹€)
echo "3. í™˜ê²½ë³€ìˆ˜ ì„¤ì • í™•ì¸"
env | grep "NCP_" | sed 's/=.*/=***HIDDEN***/'

# 4. ë¡œê·¸ íŒŒì¼ ê¶Œí•œ í™•ì¸
echo "4. ë¡œê·¸ íŒŒì¼ ê¶Œí•œ í™•ì¸"
ls -la /var/log/ssl-check*.log 2>/dev/null || echo "ë¡œê·¸ íŒŒì¼ ì—†ìŒ"

echo "ë³´ì•ˆ ê²€ì‚¬ ì™„ë£Œ"
```

### ìˆ˜ë™ ë³´ì•ˆ ì ê²€

**ì½”ë“œ ê²€í† :**
```bash
# í•˜ë“œì½”ë”©ëœ ì‹œí¬ë¦¿ ê²€ìƒ‰
grep -r -i "password\|secret\|key\|token" --exclude-dir=node_modules .

# ìœ„í—˜í•œ í•¨ìˆ˜ ì‚¬ìš© ê²€ìƒ‰
grep -r "eval\|exec\|system" --exclude-dir=node_modules .

# SQL ì¸ì ì…˜ íŒ¨í„´ ê²€ìƒ‰ (í•´ë‹¹ì‹œ)
grep -r "query.*+\|query.*concat" --exclude-dir=node_modules .
```

## ğŸ“‹ ë³´ì•ˆ ì—…ë°ì´íŠ¸ ì ˆì°¨

### 1. ì •ê¸° ì—…ë°ì´íŠ¸
```bash
# 1. ë°±ì—… ìƒì„±
cp -r /path/to/ssl-checker /backup/ssl-checker-$(date +%Y%m%d)

# 2. ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
npm update

# 3. ë³´ì•ˆ íŒ¨ì¹˜ í™•ì¸
npm audit fix

# 4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run single google.com

# 5. ìš´ì˜ í™˜ê²½ ë°°í¬
```

### 2. ê¸´ê¸‰ ë³´ì•ˆ íŒ¨ì¹˜
```bash
# 1. ì¦‰ì‹œ ì‹œìŠ¤í…œ ì¤‘ì§€
sudo systemctl stop ssl-checker

# 2. íŒ¨ì¹˜ ì ìš©
npm install package@latest

# 3. ì¦‰ì‹œ í…ŒìŠ¤íŠ¸
npm run single google.com

# 4. ìš´ì˜ ì¬ì‹œì‘
sudo systemctl start ssl-checker
```

## ğŸ› ï¸ ë³´ì•ˆ ë„êµ¬ ì¶”ì²œ

### ì •ì  ë¶„ì„ ë„êµ¬
```bash
# ESLint ë³´ì•ˆ í”ŒëŸ¬ê·¸ì¸
npm install --save-dev eslint-plugin-security

# Snyk ì·¨ì•½ì  ìŠ¤ìº”
npm install -g snyk
snyk test
```

### ëŸ°íƒ€ì„ ë³´ì•ˆ
```bash
# í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§
ps aux | grep ssl-checker

# ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëª¨ë‹ˆí„°ë§
netstat -an | grep :443
```

## ğŸ“ ë³´ì•ˆ ë¬¸ì˜

ë³´ì•ˆ ì·¨ì•½ì  ë°œê²¬ì‹œ:
1. GitHub Security Advisoryë¥¼ í†µí•´ ë¹„ê³µê°œ ë³´ê³ 
2. íŒ¨ì¹˜ ê°œë°œ í›„ ê³µê°œ
3. ì‚¬ìš©ìë“¤ì—ê²Œ ì—…ë°ì´íŠ¸ ì•ˆë‚´

---

**âš ï¸ ì¤‘ìš”**: ì´ ì‹œìŠ¤í…œì€ ì¤‘ìš”í•œ ì¸í”„ë¼ë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤. ë³´ì•ˆ ì„¤ì •ì„ ì†Œí™€íˆ í•˜ì§€ ë§ˆì„¸ìš”. 